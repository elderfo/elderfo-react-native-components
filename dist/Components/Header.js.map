{"version":3,"sources":["../../src/Components/Header.js"],"names":["Header","props","logger","console","_validateProps","isSearch","onSearch","searchPlaceholder","isFixedSearch","searchRightIcon","onSearchRightClick","title","warn","state","isSearching","searchText","_setSearchMode","bind","_renderSearchBox","_getDefaultStyles","_getForegroundColor","_onSearchChanged","_renderChildren","_renderTitle","_getChildArray","setState","children","Array","isArray","styles","titleElement","find","el","type","style","cloneElement","titleText","icon","onClick","menuTouchable","navbarIcon","button","_getButton","undefined","placeholder","searchInput","firstComponent","length","rightButtonIcon","onRightButtonClick","leftButtonIcon","onLeftButtonClick","backgroundColor","foregroundColor","create","navbar","_renderButton","titleContainer","ios","hasLeftButton","foreground","background","flexDirection","alignItems","shadowColor","shadowOffset","width","height","shadowOpacity","shadowRadius","paddingTop","elevation","position","marginLeft","flex","fontSize","color","alignSelf","marginHorizontal","padding","propTypes","string","func","bool"],"mappings":"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","file":"Header.js","sourcesContent":["import React, { PropTypes, Component } from 'react';\nimport { View, Text, StyleSheet, TouchableOpacity, TextInput } from 'react-native';\nimport Icon from 'react-native-vector-icons/Ionicons'\nimport Platform from './Platform';\n\nclass Header extends Component {\n\n  logger = console;\n\n  static propTypes = {\n    title: PropTypes.string,\n    rightButtonIcon: PropTypes.string,\n    onRightButtonClick: PropTypes.func,\n    leftButtonIcon: PropTypes.string,\n    onLeftButtonClick: PropTypes.func,\n    backgroundColor: PropTypes.string,\n    foregroundColor: PropTypes.string,\n    isSearch: PropTypes.bool,\n    onSearch: PropTypes.func,\n    searchPlaceholder: PropTypes.string,\n    isFixedSearch: PropTypes.bool,\n    searchRightIcon: PropTypes.string,\n    onSearchRightClick: PropTypes.func\n  }\n\n  _validateProps = ({\n    isSearch,\n    onSearch,\n    searchPlaceholder,\n    isFixedSearch,\n    searchRightIcon,\n    onSearchRightClick,\n    title\n  }) => {\n    if (isSearch\n      || onSearch\n      || searchPlaceholder\n      || isFixedSearch\n      || searchRightIcon\n      || onSearchRightClick\n    ) {\n      this.logger.warn('The `isSearch`, `onSearch`, `searchPlaceholder`, `isFixedSearch`, searchRightIcon` and `onSearchRightIcon` props are deprecated. Please use the SearchHeader component for this functionality');\n    }\n\n    if (title) {\n      this.logger.warn('The `title` property has been deprecated. Please use a Text component for this functionality.');\n    }\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isSearching: props.isFixedSearch,\n      searchText: ''\n    };\n\n    this._validateProps(props);\n\n    this._setSearchMode = this._setSearchMode.bind(this);\n    this._renderSearchBox = this._renderSearchBox.bind(this);\n    this._getDefaultStyles = this._getDefaultStyles.bind(this);\n    this._getForegroundColor = this._getForegroundColor.bind(this);\n    this._onSearchChanged = this._onSearchChanged.bind(this);\n    this._renderChildren = this._renderChildren.bind(this);\n    this._renderTitle = this._renderTitle.bind(this);\n    this._getChildArray = this._getChildArray.bind(this);\n  }\n\n  _setSearchMode(isSearching, searchText) {\n    this.setState({ isSearching, searchText });\n  }\n\n  _getChildArray() {\n    let children = [];\n\n    if (this.props.children) {\n      children = children = Array.isArray(this.props.children)\n        ? this.props.children\n        : [this.props.children];\n    }\n\n    return children;\n  }\n\n  _renderTitle(title, styles) {\n    const children = this._getChildArray();\n\n    // Look for a Text element first before trying to render the props title\n    const titleElement = children.find(el => el.type === Text);\n\n    if (titleElement) {\n      if (title) {\n        this.logger.warn('A title property was specified along with a Text element as a child, the text element will be used.')\n      }\n\n      if (titleElement.props.style) {\n        return titleElement;\n      } else {\n        return React.cloneElement(titleElement, { style: styles.titleText });\n      }\n    } else if (title) {\n      return (<Text style={styles.titleText}>{title}</Text>);\n    }\n  }\n\n  _onSearchChanged(searchText) {\n    this.setState({ searchText });\n\n    if (this.props.onSearch) {\n      this.props.onSearch(searchText);\n    }\n  }\n\n  _getButton(icon, onClick, styles) {\n    return (\n      <TouchableOpacity onPress={onClick} style={styles.menuTouchable} activeOpacity={.4}>\n        <Icon name={icon} style={styles.navbarIcon} />\n      </TouchableOpacity>\n    );\n  }\n\n  _renderButton(icon, onClick, styles) {\n    const button = (icon && onClick)\n      ? this._getButton(icon, onClick, styles)\n      : undefined;\n\n    return (\n      <View>\n        {button}\n      </View>\n    );\n  }\n\n  _renderSearchBox(styles) {\n    const placeholder = this.props.searchPlaceholder ? this.props.searchPlaceholder : 'Search';\n    return (\n      <TextInput\n        style={styles.searchInput}\n        autoFocus={true}\n        placeholder={placeholder}\n        onChangeText={this._onSearchChanged}\n        value={this.state.searchText} />\n    );\n  }\n\n  _renderChildren(styles) {\n    const {title} = this.props;\n    const firstComponent = this.state.isSearching\n      ? this._renderSearchBox(styles)\n      : this._renderTitle(title, styles);\n\n    if (firstComponent) {\n      return firstComponent;\n    }\n    const children = this._getChildArray();\n    if (children) {\n      if (children.length > 1) {\n        this.logger.warn('Multiple children are not currently support. Only the first child will be rendered.');\n      }\n      return children[0];\n    }\n  }\n\n  render() {\n    let {\n      rightButtonIcon,\n      onRightButtonClick,\n      leftButtonIcon,\n      onLeftButtonClick,\n    } = this.props;\n\n    const {\n      backgroundColor,\n      foregroundColor,\n      isSearch,\n      isFixedSearch,\n      searchRightIcon,\n      onSearchRightClick\n    } = this.props;\n\n    if (isSearch && !this.state.isSearching) {\n      rightButtonIcon = 'md-search';\n      onRightButtonClick = () => this._setSearchMode(true);\n    } else if (isSearch && this.state.isSearching) {\n      rightButtonIcon = (searchRightIcon && onSearchRightClick) ? searchRightIcon : null;\n      onRightButtonClick = (searchRightIcon && onSearchRightClick) ? onSearchRightClick : null;\n      leftButtonIcon = 'md-arrow-back';\n\n      if (!isFixedSearch) {\n        onLeftButtonClick = () => this._setSearchMode(false, '');\n      }\n    }\n\n    const styles = StyleSheet.create(this._getDefaultStyles((leftButtonIcon && onLeftButtonClick)));\n\n    return (\n      <View style={styles.navbar}>\n        {this._renderButton(leftButtonIcon, onLeftButtonClick, styles)}\n        <View style={styles.titleContainer}>\n          {this._renderChildren(styles)}\n        </View>\n        {this._renderButton(rightButtonIcon, onRightButtonClick, styles)}\n      </View>\n    );\n  }\n\n  _getForegroundColor() {\n    const { foregroundColor} = this.props;\n\n    return foregroundColor ? foregroundColor : Platform.ios ? 'black' : 'white';\n  }\n\n  _getDefaultStyles(hasLeftButton) {\n    const {backgroundColor} = this.props;\n\n    const foreground = this._getForegroundColor();\n    const background = backgroundColor ? backgroundColor : (Platform.ios) ? '#F8F8F8' : '#4179F7';\n\n    return {\n      navbar: {\n        backgroundColor: background,\n        flexDirection: 'row',\n        alignItems: 'center',\n        shadowColor: '#000',\n        shadowOffset: { width: 0, height: 2 },\n        shadowOpacity: 0.1,\n        shadowRadius: 1.5,\n        paddingTop: Platform.ios ? 15 : 0,\n        height: Platform.ios ? 64 : 56,\n        elevation: 3,\n        position: 'relative',\n      },\n      titleContainer: {\n        marginLeft: hasLeftButton ? 16 : 72,\n        flex: 1\n      },\n      titleText: {\n        fontSize: 16,\n        color: foreground\n      },\n      navbarIcon: {\n        fontSize: 24,\n        color: foreground,\n        alignSelf: 'center',\n      },\n      menuTouchable: {\n        backgroundColor: background,\n        marginHorizontal: 4,\n        height: 48,\n        width: 48,\n        padding: 12\n      },\n      searchInput: {\n        fontSize: 16,\n        color: foreground,\n        flex: 1\n      }\n    };\n  }\n};\n\nexport default Header;\n"]}